{% extends "layouts/base.html" %}
{% block title %} My Request {% endblock title %} 

{% block content %}

<!-- Step 1 - Include the fusioncharts core library -->
<script type="text/javascript" src="https://cdn.fusioncharts.com/fusioncharts/latest/fusioncharts.js"></script>
<!-- Step 2 - Include the fusion theme -->
<script type="text/javascript" src="https://cdn.fusioncharts.com/fusioncharts/latest/themes/fusioncharts.theme.gammel.js"></script>

<script>

    // 接收从 views.py 传递的数据
var importData = JSON.parse({{ chart_data | tojson | safe }});

// 第一张图表的数据源配置
const dataSourceColumn = {
chart: {
caption: "Age Distribution Graph",
subcaption: "Number of users in different age groups",
xaxisname: "Age Groups",
yaxisname: "Total Number of Users",
numbersuffix: "K",
theme: "gammel"
},
data: importData // 使用转换后的数据
};

// 第二张图表的数据源配置
const dataSourcePie = {
chart: {
caption: "Recommended Portfolio Split",
subcaption: "For a net-worth of $1M",
showvalues: "1",
showpercentintooltip: "0",
numberprefix: "$",
enablemultislicing: "1",
theme: "gammel"
},
data: importData // 这里假设 importData 也适用于饼图数据结构
};

FusionCharts.ready(function() {
// 渲染第一张图表
new FusionCharts({
type: "column2d",
renderAt: "chart-container",
width: "100%",
height: "500", // 您可以根据需要设置一个固定高度或使用100%等
dataFormat: "json",
dataSource: dataSourceColumn
}).render();

// 渲染第二张图表
new FusionCharts({
type: "pie3d",
renderAt: "chart-container-pie",
width: "100%",
height: "500", // 同上
dataFormat: "json",
dataSource: dataSourcePie
}).render();
});

</script>



<div class="card-header py-3">
    <p class="text-primary m-0 fw-bold">User Portrait</p>
</div>
<div id="chart-container"></div>
<div id="chart-container-pie"></div>



{% endblock content %}